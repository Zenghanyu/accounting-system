# 智能记账新功能使用说明

## 新增功能

本次更新为记账系统添加了两个强大的AI智能功能：

### 1. 语音记账功能
### 2. 票据扫描识别功能

---

## 功能详解

### 🎤 语音记账

**功能描述：**
通过语音说出交易内容，AI自动识别并填写到记账表单中。

**使用步骤：**

1. **进入记账页面**
   - 登录系统后，点击顶部"记账"标签页

2. **设置API密钥**（首次使用）
   - 点击"AI分析"标签页
   - 访问 https://platform.deepseek.com 注册账号
   - 获取API Key并保存到系统中

3. **开始语音记账**
   - 返回"记账"页面，找到"智能记账"卡片
   - 点击"点击开始语音记账"按钮
   - 允许浏览器使用麦克风权限
   - 按钮变红并显示"正在录音..."

4. **说出记账内容**
   - 例如："今天在超市买菜花了50块"
   - 例如："打车去公司花了30元"
   - 例如："收到工资5000元"
   - 说完后停顿1-2秒，系统会自动识别

5. **AI自动解析**
   - 系统会显示识别到的语音文字
   - AI自动分析并提取：
     - 类型（收入/支出）
     - 分类（餐饮、交通等）
     - 金额
     - 备注信息
   - 自动填充到记账表单

6. **核对并提交**
   - 检查AI填充的信息是否正确
   - 如有需要可手动调整
   - 点击"添加交易"完成记账

**语音示例：**
- "买了一件衣服花了200块" → 支出 | 购物 | 200元
- "收到兼职费500" → 收入 | 兼职 | 500元
- "中午吃饭花了35" → 支出 | 餐饮 | 35元
- "坐地铁花了4块钱" → 支出 | 交通 | 4元

**注意事项：**
- 需要使用Chrome、Edge等现代浏览器（支持Web Speech API）
- 需要允许浏览器使用麦克风权限
- 说话时尽量清晰，包含金额和用途
- 建议在安静环境下使用

---

### 📸 票据扫描识别

**功能描述：**
上传发票、小票等票据照片，AI自动识别金额、商户、日期等信息。

**使用步骤：**

1. **准备票据照片**
   - 使用手机拍摄发票/小票照片
   - 确保照片清晰，文字可读
   - 光线充足，避免反光
   - 图片大小不超过5MB

2. **上传票据**
   - 进入"记账"页面
   - 在"票据扫描"区域点击"上传票据图片"
   - 选择照片文件（支持JPG、PNG等格式）
   - 系统会显示图片预览

3. **开始识别**
   - 点击"开始识别"按钮
   - AI会分析图片并提取信息

4. **查看识别结果**
   - 系统显示识别到的信息：
     - 金额
     - 日期
     - 商户名称
     - 分类
     - 购买物品
   - 点击"填充到记账表单"按钮

5. **核对并提交**
   - 检查自动填充的信息
   - 手动调整不准确的内容
   - 提交记账

**适用场景：**
- 超市购物小票
- 餐厅消费发票
- 交通费用凭证
- 医疗发票
- 各类消费凭证

**注意事项：**
- 需要先在AI分析页面设置DeepSeek API密钥
- 图片越清晰，识别准确率越高
- 建议拍摄时保持票据平整
- 如果识别不准确，可以重新上传或手动输入

---

## AI功能所需配置

### 获取DeepSeek API密钥

1. **注册DeepSeek账号**
   - 访问：https://platform.deepseek.com
   - 点击注册按钮
   - 填写邮箱和密码完成注册

2. **获取API Key**
   - 登录后进入控制台
   - 点击"API Keys"
   - 创建新的API Key
   - 复制密钥（只显示一次，请妥善保存）

3. **在系统中设置**
   - 打开记账系统
   - 进入"AI分析"标签页
   - 在"API设置"区域粘贴API密钥
   - 点击"保存密钥"

4. **检查余额**
   - DeepSeek提供免费额度
   - 新用户注册通常有免费试用
   - 在平台查看余额和使用情况

---

## 常见问题

### Q1: 语音识别不工作？
**A:**
- 检查浏览器是否支持（建议使用Chrome、Edge）
- 确认已允许麦克风权限
- 尝试刷新页面重试

### Q2: AI解析不准确？
**A:**
- 说话时尽量清晰，包含完整信息
- 明确说出金额和用途
- 可以重新录音或手动修改

### Q3: 票据识别失败？
**A:**
- 检查API密钥是否正确设置
- 确认图片清晰度
- 查看API余额是否充足
- 重新拍摄更清晰的照片

### Q4: API调用失败？
**A:**
- 检查API密钥是否有效
- 确认网络连接正常
- 查看DeepSeek平台余额
- 检查浏览器控制台错误信息

### Q5: 识别结果为空或错误？
**A:**
- 票据内容可能不够清晰
- AI无法识别特殊格式的票据
- 可以手动输入正确信息
- 提供反馈帮助改进

---

## 浏览器兼容性

### 语音记账
- ✅ Chrome 25+
- ✅ Edge 79+
- ✅ Safari 14.1+
- ❌ Firefox（部分版本不支持）

### 票据扫描
- ✅ 所有现代浏览器
- ✅ 移动端浏览器

---

## 隐私说明

1. **语音数据**
   - 语音识别由浏览器本地完成
   - 仅识别后的文字发送给AI
   - 不会保存语音文件

2. **票据图片**
   - 图片仅用于一次性识别
   - 不会上传到服务器永久保存
   - 关闭页面后图片数据清除

3. **API密钥**
   - 存储在浏览器本地
   - 仅用于调用DeepSeek API
   - 不会分享给第三方

4. **财务数据**
   - 所有交易记录保存在本地浏览器
   - 不会上传到任何服务器
   - 数据完全由您控制

---

## 使用建议

1. **定期备份数据**
   - 使用"导出数据"功能定期备份
   - 避免浏览器缓存清理导致数据丢失

2. **合理使用AI功能**
   - AI识别结果仅供参考
   - 提交前务必核对信息准确性
   - 重要交易建议手动核实

3. **保护API密钥**
   - 不要在公共场合暴露密钥
   - 定期检查API使用情况
   - 发现异常及时更换密钥

4. **优化使用体验**
   - 语音记账在安静环境下效果更好
   - 票据拍摄时保持清晰对焦
   - 遇到问题可多次尝试

---

## 更新日志

**v2.0.0** - 2024年
- ✨ 新增语音记账功能
- ✨ 新增票据扫描识别功能
- 🎨 优化智能记账界面设计
- 🔧 改进AI解析准确性

---

## 技术支持

如遇到问题或有建议，欢迎反馈！

**享受智能记账，让财务管理更轻松！** 💰✨
